<!-- adminSideNavbar.ejs -->
<div class="sidebar-wrapper">
    <!-- Sidebar Toggle Button (visible only on mobile) -->
    <button id="sidebarToggleBtn" class="navbar-toggler d-md-none position-fixed">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar Content -->
    <div class="sidebar" id="adminSidebar">
        <div class="sidebar-header d-flex align-items-center justify-content-between">
            <a class="sidebar-brand d-flex align-items-center" href="/admin/dashboard">
                <div class="sidebar-brand-icon">
                    <i class="fas fa-university text-white"></i>
                </div>
                <div class="sidebar-brand-text text-white mx-3">Admin Panel</div>
            </a>
            <button class="btn-close d-md-none text-white" id="sidebarCloseBtn"></button>
        </div>
        
        <hr class="sidebar-divider">
        
        <div class="nav-item">
            <a class="nav-link <%= path === '/admin/dashboard' ? 'active' : '' %>" href="/admin/dashboard">
                <i class="fas fa-fw fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
        </div>
        
        <div class="nav-item">
            <a class="nav-link <%= path === '/admin/faculty' ? 'active' : '' %>" href="/admin/adminFaculty">
                <i class="fas fa-fw fa-chalkboard-teacher"></i>
                <span>Faculty Management</span>
            </a>
        </div>
        
        <div class="nav-item">
            <a class="nav-link <%= path === '/admin/students' ? 'active' : '' %>" href="/admin/students">
                <i class="fas fa-fw fa-user-graduate"></i>
                <span>Student Management</span>
            </a>
        </div>
        
        <div class="nav-item">
            <a class="nav-link <%= path === '/admin/feedback-forms' ? 'active' : '' %>" href="/admin/feedback-forms">
                <i class="fas fa-fw fa-clipboard-list"></i>
                <span>Feedback Forms</span>
            </a>
        </div>
        
        <div class="nav-item">
            <a class="nav-link <%= path === '/admin/reports' ? 'active' : '' %>" href="/admin/reports">
                <i class="fas fa-fw fa-chart-bar"></i>
                <span>Reports & Analytics</span>
            </a>
        </div>
        
        <hr class="sidebar-divider">
        
        <div class="nav-item">
            <a class="nav-link <%= path === '/admin/profile' ? 'active' : '' %>" href="/admin/profile">
                <i class="fas fa-fw fa-user-circle"></i>
                <span>Profile</span>
            </a>
        </div>
        
        <div class="nav-item">
            <a class="nav-link" href="/logout">
                <i class="fas fa-fw fa-sign-out-alt"></i>
                <span>Logout</span>
            </a>
        </div>
    </div>

    <!-- Overlay for mobile sidebar -->
    <div class="sidebar-overlay d-md-none" id="sidebarOverlay"></div>
</div>

<!-- CSS for responsive sidebar -->
<style>
    .sidebar-wrapper {
        position: relative;
    }

    .sidebar {
        height: 100vh;
        min-height: 100%;
        width: 250px;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1040;
        background-color: #4e73df;
        background-image: linear-gradient(180deg, #4e73df 10%, #224abe 100%);
        background-size: cover;
        overflow-y: auto;
        transition: all 0.3s ease;
    }

    .sidebar-header {
        padding: 1rem;
    }

    .sidebar-brand {
        font-size: 1.2rem;
        font-weight: 800;
        text-decoration: none;
    }

    .sidebar-divider {
        border-top: 1px solid rgba(255, 255, 255, 0.15);
        margin: 0 1rem;
    }

    .nav-item {
        position: relative;
    }

    .nav-link {
        display: flex;
        align-items: center;
        padding: 0.75rem 1rem;
        color: rgba(255, 255, 255, 0.8);
        text-decoration: none;
        transition: all 0.2s ease;
    }

    .nav-link:hover {
        color: #fff;
        background-color: rgba(255, 255, 255, 0.1);
    }

    .nav-link.active {
        font-weight: 700;
        color: #fff;
        background-color: rgba(255, 255, 255, 0.2);
    }

    .nav-link i {
        margin-right: 0.5rem;
        font-size: 0.85rem;
    }

    .nav-link span {
        font-size: 0.85rem;
    }

    /* Toggle button styles */
    #sidebarToggleBtn {
        top: 1rem;
        left: 1rem;
        z-index: 1030;
        border: none;
        background-color: rgba(78, 115, 223, 0.9);
        color: white;
        padding: 0.4rem 0.6rem;
        border-radius: 0.25rem;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    #sidebarCloseBtn {
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 0.2rem;
    }

    /* Overlay for mobile */
    .sidebar-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1030;
    }

    /* Media queries for responsive behavior */
    @media (max-width: 767.98px) {
        .sidebar {
            transform: translateX(-100%);
        }

        .sidebar.show {
            transform: translateX(0);
        }

        body.sidebar-open {
            overflow: hidden;
        }

        .sidebar-overlay.show {
            display: block;
        }
    }

    /* Content margin adjustment for larger screens */
    @media (min-width: 768px) {
        .content-wrapper {
            margin-left: 250px;
        }
    }
</style>

<!-- JavaScript for sidebar toggle functionality -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const sidebar = document.getElementById('adminSidebar');
        const toggleBtn = document.getElementById('sidebarToggleBtn');
        const closeBtn = document.getElementById('sidebarCloseBtn');
        const overlay = document.getElementById('sidebarOverlay');
        
        function openSidebar() {
            sidebar.classList.add('show');
            overlay.classList.add('show');
            document.body.classList.add('sidebar-open');
        }
        
        function closeSidebar() {
            sidebar.classList.remove('show');
            overlay.classList.remove('show');
            document.body.classList.remove('sidebar-open');
        }
        
        toggleBtn.addEventListener('click', openSidebar);
        closeBtn.addEventListener('click', closeSidebar);
        overlay.addEventListener('click', closeSidebar);
        
        // Close sidebar when clicking on a link (for mobile)
        const navLinks = document.querySelectorAll('.sidebar .nav-link');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                if (window.innerWidth < 768) {
                    closeSidebar();
                }
            });
        });
        
        // Handle window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth >= 768) {
                closeSidebar();
            }
        });
    });
</script>